language: go

before_install:
  - sudo apt-get update
  - sudo apt-get install nodejs -y

install:
  - go get ./...
  - cd web && npm install && npm run build

script:
  - cd $TRAVIS_BUILD_DIR && go test ./...
  - cd web && npm run lint

after_success:
  - cd $TRAVIS_BUILD_DIR && scripts/build-dist dev